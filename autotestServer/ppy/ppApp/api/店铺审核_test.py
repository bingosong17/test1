# NOTE: Generated By HttpRunner v3.1.4
"""
    概要：
        店铺审核
    输入参数：
        "operatorId": BD人员id
        "id": id/userId/shopId
        "shopPhone": 店铺号码
        "longitude": 经度
        "latitude": 纬度
        "operatorName": bd名字
        "uid": 店铺uid
        "user": 店铺user
        "shopName": 店铺名字
    输出参数：
        无
    前置接口：
        无
"""


from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase


class TestCase店铺审核(HttpRunner):

    config = Config("店铺审核").verify(False).base_url("${testEnv($business)}").variables(
        **{
            "business": "ppApp",
            "phone": "13797912089",
            "session": "${getSession($business,$phone)}",
            "operatorId": 706,
            "operatorName": "王迪",
            "id": 320480,
            "shopPhone": "13277912957",
            "latitude": "30.504542",
            "longitude": "114.299942",
            "uid": "51594727824525592",
            "user": "黄威威",
            "shopName": "曙光",
        })

    teststeps = [
        Step(
            RunRequest("/ppy-pinpin/myCustomer/shopExamine")
            .post("/myCustomer/shopExamine")
            .with_headers(
                **{
                    "Accept": "application/json",
                    "channel": "app",
                    "Accept-Language": "zh-Hans-CN;q=1",
                    "Accept-Encoding": "gzip, deflate",
                    "Content-Type": "application/json",
                    "sessionId": "$session",
                    "deviceId": "0380efdbdb0938af0d7a3852519f361a86ff",
                    "Content-Length": "1273",
                    "serviceName": "NEW-PP",
                    "Connection": "keep-alive",
                }
            )
            .with_json(
                {
                    "portrait": True,
                    "businessLicense": {
                        "legalRepresentative": "孙期",
                        "picUrl": "https://images.alpha.pinpianyi.cn/images/common/10ef5eb288b6429c9e9d18d861cbea89.jpg",
                        "socialCreditCode": "91110108MA01EBFH9B",
                        "recordType": 0,
                        "companyType": "其他有限责任公司",
                        "companyAddress": "北京市朝阳区狮家坡村156号3幢1层06号",
                        "establishDate": "20180829",
                        "checkInfoText": "",
                        "possessType": 1,
                        "companyName": "北京妙树托育服务有限公司",
                        "shopId": 0,
                        "validity": "长期",
                        "finished": 1,
                    },
                    "rollPhone": "$shopPhone",
                    "userClass": "住宅区",
                    "shopArea": "10",
                    "landmarkAddress": "",
                    "examineStatus": 0,
                    "businesEnd": "17:38",
                    "latitude": "$latitude",
                    "longitude": "$longitude",
                    "operatorName": "$operatorName",
                    "shopName": "$shopName",
                    "userBranchList": [],
                    "operatorId": "$operatorId",
                    "id": "$id",
                    "user": "$user",
                    "uid": "$uid",
                    "phone": "$shopPhone",
                    "stockChannels": "",
                    "landmarkName": "",
                    "shopTypeText": "便利店",
                    "businesStart": "11:38",
                    "pics": "",
                    "shopType": "00",
                    "specificAddress": "",
                }
            )
            .validate()
            .assert_equal("status_code", 200)
            .assert_equal("body.statusCode", 2000)
            .assert_equal("body.body", "0004")
        ),
    ]


if __name__ == "__main__":
    TestCase店铺审核().test_start()
