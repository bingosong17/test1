# NOTE: Generated By HttpRunner v3.1.3
"""
      概要：
        店铺审核
    输入参数：
        "phone": 登陆用户手机号码
    输出参数：
        无
    前置接口：
        用户登陆；获取公海列表
"""

from httprunner import HttpRunner, Config, Step, RunTestCase
from ppApp.api.模糊查询无未审核店铺_test import TestCase模糊查询无未审核店铺 as 查询未审核店铺
from ppApp.api.审核店铺详情_test import TestCase审核店铺详情 as 审核店铺详情
from ppApp.api.根据经纬度查询所在战区和商圈_test import TestCase根据经纬度查询所在战区和商圈 as 根据经纬度查询所在战区和商圈
from ppApp.api.获取个人信息_test import TestCase获取个人信息 as 获取个人信息
from ppApp.api.店铺审核_test import TestCase店铺审核 as 店铺审核

class TestCase店铺审核(HttpRunner):

    config = Config("testcase description").verify(False).base_url("${testEnv($business)}").variables(
        **{
            "business": "ppApp",
            "phone": "18758166686",
            "session": "${getSession($business,$phone)}",
            "name": "test6252"
        })

    teststeps = [
        Step(
            RunTestCase("查询未审核店铺").call(查询未审核店铺)
                .export(*["WaitingCheckShopId"])
        ),
        Step(
            RunTestCase("审核店铺详情").with_variables(
                **{
                    "shopId": "$WaitingCheckShopId"
                }
            ).call(审核店铺详情).export(*["longitude", "latitude", "shopUid", "shopPhone", "shopUser"])
        ),
        Step(
            RunTestCase("根据经纬度查询所在战区和商圈").call(根据经纬度查询所在战区和商圈)
        ),
        Step(
            RunTestCase("获取个人信息").call(获取个人信息).export(*["bdId", "bdName"])
        ),
        Step(
            RunTestCase("店铺审核").with_variables(
                **{
                    "id": "$WaitingCheckShopId",
                    "shopName": "$name",
                    "operatorId": "$bdId",
                    "operatorName": "$bdName",
                    "shopPhone": "$shopPhone",
                    "uid": "$shopUid",
                    "user": "$shopUser",
                }
            ).call(店铺审核)
        ),
    ]


if __name__ == "__main__":
    TestCase店铺审核().test_start()

