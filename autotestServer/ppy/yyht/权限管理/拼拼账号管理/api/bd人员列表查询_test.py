# NOTE: Generated By HttpRunner v3.1.4
"""
    概要：
        拼拼用户列表查询
    输入参数：
        "user": 运营人员姓名,
        "businessLine": 业务线, 0-城市站, 1-卫星城
        "exampleState": 审核状态,
        "position": 职位-BD,BDM,CM,城市总,省总,总监,其他
        "department": 部门-市场,采购,技术,产品,物流,其他
        "cityCode": 城市编码
        "status": 状态，0-正常，1-已停用，
        "sex": 性别,0-男,1-女
        "inviteCode": 邀请码
        "jobnumber": 运营人员工号
        "leaderName": 上级姓名
        "phone": 运营人员手机号
    输出参数：
        无
    前置接口：
        无
"""


from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase
import env


class TestCaseBd人员列表查询(HttpRunner):

    config = Config("Bd人员列表查询").verify(False).base_url("${testEnv($business)}").variables(
        **{
            "business": "yyht",
            "session": "${getSession($business)}",
            "user": "",
            "businessLine": "",
            "exampleState": "",
            "position": "",
            "department": "",
            "cityCode": env.cityCode,
            "status": "",
            "sex": "",
            "inviteCode": "",
            "jobnumber": "",
            "leaderName": "",
            "phone": "",
        }).export(*["bdId", "bdPhone"])

    teststeps = [
        Step(
            RunRequest("/test_t/pinpin/operator/operatorPage")
            .post("/pinpin/operator/operatorPage")
            .with_headers(
                **{
                    "Connection": "keep-alive",
                    "Content-Length": "138",
                    "sessionId": "$session",
                    "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.75 Safari/537.36",
                    "systemCode": "yypp",
                    "Content-Type": "application/json",
                    "Accept": "*/*",
                    "Sec-Fetch-Site": "same-origin",
                    "Sec-Fetch-Mode": "cors",
                    "Sec-Fetch-Dest": "empty",
                    "Accept-Encoding": "gzip, deflate, br",
                    "Accept-Language": "zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7",
                }
            )
            .with_json(
                {
                    "user": "$user",
                    "businessLine": "$businessLine",
                    "exampleState": "$exampleState",
                    "position": "$position",
                    "department": "$department",
                    "cityCode": "$cityCode",
                    "status": "$status",
                    "sex": "$sex",
                    "inviteCode": "$inviteCode",
                    "jobnumber": "$jobnumber",
                    "leaderName": "$leaderName",
                    "phone": "$phone",
                    "pageNum": 1,
                    "pageSize": 10,
                }
            ).extract()
            .with_jmespath("body.body.pageData[0].id", "bdId")
            .with_jmespath("body.body.pageData[0].phone", "bdPhone")
            .validate()
            .assert_equal("status_code", 200)
            .assert_equal("body.statusCode", 2000)
        ),
    ]


if __name__ == "__main__":
    TestCaseBd人员列表查询().test_start()

"""
response;
{
	"statusCode": 2000,
	"msg": null,
	"traceMsg": "traceId: null",
	"timestamp": 1602752267,
	"signType": null,
	"sign": null,
	"body": {
		"pageNum": 1,
		"pageSize": 10,
		"pageCount": 264,
		"totalSize": 2632,
		"pageData": [{
			"id": 1,
			"user": "测试是的",
			"roleId": null,
			"phone": "13868018217",
			"department": "市场",
			"position": "BD",
			"jobNumber": 35,
			"sex": false,
			"createTime": "2017-07-26 15:29:24",
			"disabled": false,
			"inviteCode": "1",
			"cityCode": "330100",
			"leaderName": "邓虹雨",
			"leaderId": null,
			"businessLine": 0,
			"sexName": "男",
			"disabledName": "正常",
			"cityName": "杭州站",
			"allocatedCount": 4,
			"registerCount": 0,
			"waitExamineCount": 0
		}, {
			"id": 2,
			"user": "王子铭",
			"roleId": null,
			"phone": "13758178214",
			"department": "市场",
			"position": "BD",
			"jobNumber": 36,
			"sex": false,
			"createTime": "2017-07-26 15:29:52",
			"disabled": false,
			"inviteCode": "2",
			"cityCode": "330100",
			"leaderName": "邓虹雨",
			"leaderId": null,
			"businessLine": 0,
			"sexName": "男",
			"disabledName": "正常",
			"cityName": "杭州站",
			"allocatedCount": 1,
			"registerCount": 0,
			"waitExamineCount": 0
		}, {
			"id": 3,
			"user": "江洋洋",
			"roleId": null,
			"phone": "15558155113",
			"department": "其他",
			"position": "其他",
			"jobNumber": 37,
			"sex": null,
			"createTime": "2017-08-04 11:48:37",
			"disabled": true,
			"inviteCode": "3",
			"cityCode": null,
			"leaderName": "邓虹雨",
			"leaderId": null,
			"businessLine": 0,
			"sexName": "男",
			"disabledName": "已停用",
			"cityName": null,
			"allocatedCount": 0,
			"registerCount": 0,
			"waitExamineCount": 0
		}, {
			"id": 4,
			"user": "范建文",
			"roleId": 123,
			"phone": "13823265230",
			"department": "市场",
			"position": "BD",
			"jobNumber": 2,
			"sex": false,
			"createTime": "2017-09-01 11:51:16",
			"disabled": false,
			"inviteCode": "4",
			"cityCode": "330100",
			"leaderName": "邓虹雨",
			"leaderId": null,
			"businessLine": 0,
			"sexName": "男",
			"disabledName": "正常",
			"cityName": "杭州站",
			"allocatedCount": 0,
			"registerCount": 0,
			"waitExamineCount": 0
		}, {
			"id": 5,
			"user": "徐明月2",
			"roleId": 123,
			"phone": "18662751482",
			"department": "产品",
			"position": "其他",
			"jobNumber": 3,
			"sex": true,
			"createTime": "2017-09-01 11:51:16",
			"disabled": true,
			"inviteCode": "5",
			"cityCode": "330100",
			"leaderName": "范建文",
			"leaderId": null,
			"businessLine": 0,
			"sexName": "女",
			"disabledName": "已停用",
			"cityName": "杭州站",
			"allocatedCount": 0,
			"registerCount": 0,
			"waitExamineCount": 0
		}, {
			"id": 6,
			"user": "柴仕雨",
			"roleId": 123,
			"phone": "15999559261",
			"department": "市场",
			"position": "BDM",
			"jobNumber": 4,
			"sex": false,
			"createTime": "2017-09-01 11:51:16",
			"disabled": true,
			"inviteCode": "6",
			"cityCode": null,
			"leaderName": "邓虹雨",
			"leaderId": null,
			"businessLine": 0,
			"sexName": "男",
			"disabledName": "已停用",
			"cityName": null,
			"allocatedCount": 0,
			"registerCount": 0,
			"waitExamineCount": 0
		}, {
			"id": 7,
			"user": "郭东方",
			"roleId": 123,
			"phone": "13343239998",
			"department": "市场",
			"position": "BDM",
			"jobNumber": 5,
			"sex": false,
			"createTime": "2017-09-01 11:51:16",
			"disabled": true,
			"inviteCode": "7",
			"cityCode": null,
			"leaderName": "邓虹雨",
			"leaderId": null,
			"businessLine": 0,
			"sexName": "男",
			"disabledName": "已停用",
			"cityName": null,
			"allocatedCount": 0,
			"registerCount": 0,
			"waitExamineCount": 0
		}, {
			"id": 9,
			"user": "杨涛",
			"roleId": 123,
			"phone": "18268186428",
			"department": "其他",
			"position": "DM",
			"jobNumber": 7,
			"sex": false,
			"createTime": "2017-09-01 11:51:16",
			"disabled": false,
			"inviteCode": "9",
			"cityCode": "330100",
			"leaderName": "邓虹雨",
			"leaderId": null,
			"businessLine": 0,
			"sexName": "男",
			"disabledName": "正常",
			"cityName": "杭州站",
			"allocatedCount": 2,
			"registerCount": 2,
			"waitExamineCount": 0
		}, {
			"id": 10,
			"user": "田春龙",
			"roleId": 123,
			"phone": "15776766876",
			"department": "市场",
			"position": "城市总",
			"jobNumber": 8,
			"sex": false,
			"createTime": "2017-09-01 11:51:16",
			"disabled": true,
			"inviteCode": "10",
			"cityCode": "420100",
			"leaderName": "邓虹雨",
			"leaderId": null,
			"businessLine": 0,
			"sexName": "男",
			"disabledName": "已停用",
			"cityName": "武汉站",
			"allocatedCount": 0,
			"registerCount": 0,
			"waitExamineCount": 0
		}, {
			"id": 11,
			"user": "齐永亮",
			"roleId": 123,
			"phone": "13343110070",
			"department": "市场",
			"position": "BDM",
			"jobNumber": 9,
			"sex": false,
			"createTime": "2017-09-01 11:51:16",
			"disabled": true,
			"inviteCode": "11",
			"cityCode": null,
			"leaderName": "邓虹雨",
			"leaderId": null,
			"businessLine": 0,
			"sexName": "男",
			"disabledName": "已停用",
			"cityName": null,
			"allocatedCount": 0,
			"registerCount": 0,
			"waitExamineCount": 0
		}]
	}
}
"""