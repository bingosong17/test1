# NOTE: Generated By HttpRunner v3.1.4
"""
    概要：
        拜访子任务列表
    输入参数：
        "departmentCode":部门
        "subTaskName": 子任务名称
    输出参数：
        无
    前置接口：
        无
"""


from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase


class TestCase拜访子任务列表(HttpRunner):

    config = Config("拜访子任务列表").verify(False).base_url("${testEnv($business)}").variables(
        **{
            "business": "yyht",
            "session": "${getSession($business)}",
            "departmentCode": ["marketing"],
            "subTaskName": "tt",
        })

    teststeps = [
        Step(
            RunRequest("/test_t/pinpin/visitTask/queryVisitSubTask")
            .post(
                "/pinpin/visitTask/queryVisitSubTask"
            )
            .with_headers(
                **{
                    "Connection": "keep-alive",
                    "Content-Length": "60",
                    "sessionId": "$session",
                    "systemCode": "yypp",
                    "Content-Type": "application/json",
                    "Accept": "*/*",
                    "Sec-Fetch-Site": "same-origin",
                    "Sec-Fetch-Mode": "cors",
                    "Sec-Fetch-Dest": "empty",
                    "Accept-Encoding": "gzip, deflate, br",
                    "Accept-Language": "zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7",
                }
            )
            .with_json(
                {
                    "subTaskName": "$subTaskName",
                    "departmentCode": "$departmentCode",
                    "pageNum": 1,
                    "pageSize": 9999}
            )
            .validate()
            .assert_equal("status_code", 200)
            .assert_equal("body.statusCode", 2000)
        ),
    ]


if __name__ == "__main__":
    TestCase拜访子任务列表().test_start()
"""
response:
"body": {
        "pageNum": 1,
        "pageSize": 9999,
        "pageCount": 1,
        "totalSize": 1,
        "pageData": [
            {
                "subTaskId": "1205641401994201908",
                "subTaskType": "customize",
                "subTaskName": "tt",
                "departmentName": "市场",
                "departmentCode": "marketing",
                "createName": "孙超",
                "createTime": "2020-10-27 10:02:20",
                "templateContextJson": "[{\"type\":\"radio\",\"name\":\"单选\",\"options\":{\"required\":false,\"label\":\"\",\"placeholder\":\"\",\"options\":[{\"label\":\"选项1\",\"value\":0},{\"label\":\"选项3\",\"value\":2},{\"label\":\"选项4\",\"value\":4}],\"defaultValue\":\"\"},\"key\":\"radio_1603764122000_46293\"}]",
                "defaultValueJson": null,
                "requiredFlag": null,
                "sortNo": null,
                "flag": null
            }
        ]
    }
}
"""