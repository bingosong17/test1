# NOTE: Generated By HttpRunner v3.1.4
"""
    æ¦‚è¦ï¼š
        æ— 
    è¾“å…¥å‚æ•°ï¼š
            "pushFlag": 1,æ˜¯å¦å‘é€push.1æ˜¯2å¦
            "showFlag": 1,ç«™å†…æ˜¯å¦æ˜¾ç¤ºã€‚1æ˜¯2å¦
            "nameâ€œï¼šæ¶ˆæ¯åç§°
    è¾“å‡ºå‚æ•°ï¼š
        æ— 
    å‰ç½®æ¥å£ï¼š
        æ— 
"""

from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase, client


class TestCaseæ–°å¢æ¨é€(HttpRunner):
    config = Config("æ–°å¢æ¨é€").verify(False).base_url("${testEnv($business)}").variables(
        **{
            "business": "yyht",
            "session": "${getSession($business)}",
            "failureFlag": 1,
            "pushFlag": 1,
            "showFlag": 1,
            "name": "æˆ‘çš„äº²å¨˜ç±»",
        })

    teststeps = [
        Step(
            RunRequest("/test_t/ppy-message/pushContent/addPush")
                .post(
                "/ppy-message/pushContent/addPush"
            )
                .with_headers(
                **{
                    "Connection": "keep-alive",
                    "Content-Length": "475",
                    "sessionId": "$session",
                    "Sec-Fetch-Dest": "empty",
                    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36",
                    "systemCode": "yypp",
                    "Content-Type": "application/json",
                    "Accept": "*/*",
                    "Sec-Fetch-Site": "same-origin",
                    "Sec-Fetch-Mode": "cors",
                    "Accept-Encoding": "gzip, deflate, br",
                    "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8",
                }
            )
                .with_json(
                {
                    "name": "$name",
                    "appCode": "MALL_APP",
                    "title": "æˆ‘çš„äº²å¨˜ç±»ğŸ˜ğŸ˜",
                    "content": "æˆ‘çš„äº²å¨˜ç±»ğŸ˜ğŸ˜",
                    "pathType": 3,
                    "pathValue": "https://h5.pinpianyi.cn/h5custompage/index.html#/1320",
                    "submitType": 0,
                    "predictTime": "",
                    "pathParam": "",
                    "failureFlag": "$failureFlag",
                    "msgPicUrl": "https://images.alpha.pinpianyi.cn/images/message/e1317be49a684d96a17b548956814177.jpg",
                    "failureTime": "",
                    "thumbnailPicUrl": "",
                    "targetId": "",
                    "pushFlag": "$pushFlag",
                    "showFlag": "$showFlag",
                    "appName": "æ‹¼ä¾¿å®œ",
                    "targetType": 0,
                    "userIds": [330286, 124453, 342807, 197782]
                }
            )
                .validate()
                .assert_equal("status_code", 200)
                .assert_equal("body.statusCode", 2000)
                .assert_equal("body.body", True)
        ),
    ]


if __name__ == "__main__":
    for i in range(1):
        TestCaseæ–°å¢æ¨é€().test_start()
