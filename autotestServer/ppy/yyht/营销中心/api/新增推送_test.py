# NOTE: Generated By HttpRunner v3.1.4
"""
    概要：
        无
    输入参数：
            "pushFlag": 1,是否发送push.1是2否
            "showFlag": 1,站内是否显示。1是2否
            "name“：消息名称
    输出参数：
        无
    前置接口：
        无
"""

from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase, client


class TestCase新增推送(HttpRunner):
    config = Config("新增推送").verify(False).base_url("${testEnv($business)}").variables(
        **{
            "business": "yyht",
            "session": "${getSession($business)}",
            "failureFlag": 1,
            "pushFlag": 1,
            "showFlag": 1,
            "name": "我的亲娘类",
        })

    teststeps = [
        Step(
            RunRequest("/test_t/ppy-message/pushContent/addPush")
                .post(
                "/ppy-message/pushContent/addPush"
            )
                .with_headers(
                **{
                    "Connection": "keep-alive",
                    "Content-Length": "475",
                    "sessionId": "$session",
                    "Sec-Fetch-Dest": "empty",
                    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36",
                    "systemCode": "yypp",
                    "Content-Type": "application/json",
                    "Accept": "*/*",
                    "Sec-Fetch-Site": "same-origin",
                    "Sec-Fetch-Mode": "cors",
                    "Accept-Encoding": "gzip, deflate, br",
                    "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8",
                }
            )
                .with_json(
                {
                    "name": "$name",
                    "appCode": "MALL_APP",
                    "title": "我的亲娘类😍😍",
                    "content": "我的亲娘类😍😍",
                    "pathType": 3,
                    "pathValue": "https://h5.pinpianyi.cn/h5custompage/index.html#/1320",
                    "submitType": 0,
                    "predictTime": "",
                    "pathParam": "",
                    "failureFlag": "$failureFlag",
                    "msgPicUrl": "https://images.alpha.pinpianyi.cn/images/message/e1317be49a684d96a17b548956814177.jpg",
                    "failureTime": "",
                    "thumbnailPicUrl": "",
                    "targetId": "",
                    "pushFlag": "$pushFlag",
                    "showFlag": "$showFlag",
                    "appName": "拼便宜",
                    "targetType": 0,
                    "userIds": [330286, 124453, 342807, 197782]
                }
            )
                .validate()
                .assert_equal("status_code", 200)
                .assert_equal("body.statusCode", 2000)
                .assert_equal("body.body", True)
        ),
    ]


if __name__ == "__main__":
    for i in range(1):
        TestCase新增推送().test_start()
