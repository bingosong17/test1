# NOTE: Generated By HttpRunner v3.1.4
"""
    概要：
        无
    输入参数：
        无
    输出参数：
        无
    前置接口：
        无
"""


from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase


class TestCase查询毛利锁规则明细(HttpRunner):

    config = Config("查询毛利锁规则明细").verify(False).base_url("${testEnv($business)}").variables(
        **{
            "business": "yyht",
            "session": "${getSession($business)}",
            "ruleId": 1,
        }).export(*["ruleId", "handleType"])

    teststeps = [
        Step(
            RunRequest("/test_t/ppy-op-api/goods/priceRule/$ruleId/detail")
            .get(
                "/ppy-op-api/goods/priceRule/$ruleId/detail"
            )
            .with_headers(
                **{
                    "Connection": "keep-alive",
                    "sessionId": "$session",
                    "Sec-Fetch-Dest": "empty",
                    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36",
                    "systemCode": "yypp",
                    "Accept": "*/*",
                    "Sec-Fetch-Site": "same-origin",
                    "Sec-Fetch-Mode": "cors",
                    "Accept-Encoding": "gzip, deflate, br",
                    "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8",
                }
            ).extract()
            .with_jmespath("body.body.ruleId", "ruleId")
            .with_jmespath("body.body.handleType", "handleType")
            .validate()
            .assert_equal("status_code", 200)
            .assert_equal("body.statusCode", 2000)
        ),
    ]


if __name__ == "__main__":
    TestCase查询毛利锁规则明细().test_start()

# {
# 	"statusCode": 2000,
# 	"msg": null,
# 	"traceMsg": "traceId: 1603358311347",
# 	"timestamp": 1603358311,
# 	"signType": null,
# 	"sign": null,
# 	"body": {
# 		"ruleId": 1,
# 		"ruleName": "价格监管规则",
# 		"cityCode": "100001",
# 		"cityName": "拼便宜站",
# 		"traNames": "泾阳商圈,商圈",
# 		"sellPriceTypeText": "拼单",
# 		"maxRate": 10.0000,
# 		"startTime": "2020-10-21 00:00:00",
# 		"endTime": "2020-11-30 23:59:59",
# 		"createUserName": "郑和",
# 		"createTime": "2020-10-20 20:49:29",
# 		"updateUserName": "胡超",
# 		"updateTime": "2020-10-22 17:09:37",
# 		"mngStatus": 3,
# 		"statusText": "已停用",
# 		"handleType": 1,
# 		"handleTypeText": "强管控（自动失败）",
# 		"priceDimensionType": 3,
# 		"priceDimensionTypeText": "后台类目",
# 		"relationIds": [1133, 1136, 1139, 1142, 1145, 1148, 1151, 1154, 1157, 1160, 1163, 1166, 1169, 1172, 1175, 1178, 1181, 1184, 1187, 1190, 1193, 1196, 1199, 1202, 1205, 1208, 1211, 1214, 1217, 1220, 1223, 1226, 1229, 1232, 1235, 1238, 1241, 1244, 1247, 1250, 5289, 5290, 5291, 5292, 5293]
# 	}
# }